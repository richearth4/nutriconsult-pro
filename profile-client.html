<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriConsult Pro - My Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="dashboard-layout">

    <main class="main-content" style="max-width: 900px; margin: 0 auto; width: 100%;">
        <header class="header">
            <div>
                <h1>My Profile</h1>
                <p class="text-muted">Manage your health information</p>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <button id="backBtn" class="btn btn-outline" onclick="window.location.href='dashboard-client.html'">‚Üê
                    Back to Dashboard</button>
                <button id="logoutBtn" class="btn btn-outline"
                    style="border-color: #EF4444; color: #EF4444;">Logout</button>
            </div>
        </header>

        <!-- Profile Content -->
        <div id="profileContent">
            <!-- View Mode -->
            <div id="viewMode">
                <!-- Personal Information -->
                <div class="card mb-6">
                    <div class="header">
                        <h3>Personal Information</h3>
                        <button class="btn btn-primary" id="editBtn" onclick="enableEditMode()">‚úèÔ∏è Edit Profile</button>
                    </div>
                    <div class="grid grid-cols-2" style="gap: 1.5rem; margin-top: 1rem;">
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Full Name</div>
                            <div id="viewName" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Email</div>
                            <div id="viewEmail" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Subscription</div>
                            <div id="viewSubscription" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Age</div>
                            <div id="viewAge" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Gender</div>
                            <div id="viewGender" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Dietary Preferences -->
                <div class="card mb-6">
                    <h3>Dietary Preferences</h3>
                    <div class="grid grid-cols-2" style="gap: 1.5rem; margin-top: 1rem;">
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Diet Type</div>
                            <div id="viewDietType" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Food Allergies</div>
                            <div id="viewAllergiesList" style="font-weight: 500; margin-top: 0.25rem;">None</div>
                        </div>
                    </div>
                </div>

                <!-- Body Measurements -->
                <div class="card mb-6">
                    <h3>Body Measurements</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4" style="gap: 1.5rem; margin-top: 1rem;">
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Weight</div>
                            <div id="viewWeight" style="font-weight: 700; font-size: 1.5rem; color: var(--primary);">-
                            </div>
                            <div class="text-muted" style="font-size: 0.75rem;">kg</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Height</div>
                            <div id="viewHeight" style="font-weight: 700; font-size: 1.5rem; color: var(--primary);">-
                            </div>
                            <div class="text-muted" style="font-size: 0.75rem;">cm</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">BMI</div>
                            <div id="viewBMI" style="font-weight: 700; font-size: 1.5rem; color: var(--primary);">-
                            </div>
                            <div id="viewBMIStatus" class="text-muted" style="font-size: 0.75rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Goal Weight</div>
                            <div id="viewGoalWeight"
                                style="font-weight: 700; font-size: 1.5rem; color: var(--secondary);">-</div>
                            <div class="text-muted" style="font-size: 0.75rem;">kg</div>
                        </div>
                    </div>
                </div>

                <!-- Lifestyle -->
                <div class="card mb-6">
                    <h3>Lifestyle & Habits</h3>
                    <div class="grid grid-cols-2" style="gap: 1.5rem; margin-top: 1rem;">
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Activity Level</div>
                            <div id="viewActivity" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Sleep Quality</div>
                            <div id="viewSleep" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Water Intake</div>
                            <div id="viewWater" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                        <div>
                            <div class="text-muted" style="font-size: 0.85rem;">Meals Per Day</div>
                            <div id="viewMeals" style="font-weight: 500; margin-top: 0.25rem;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Medical History -->
                <div class="card">
                    <h3>Medical Information</h3>
                    <div style="margin-top: 1rem;">
                        <div class="text-muted" style="font-size: 0.85rem; margin-bottom: 0.5rem;">Conditions</div>
                        <div id="viewConditions" style="font-weight: 500;">None reported</div>
                    </div>
                    <div style="margin-top: 1rem;">
                        <div class="text-muted" style="font-size: 0.85rem; margin-bottom: 0.5rem;">Medications</div>
                        <div id="viewMedications" style="font-weight: 500;">None reported</div>
                    </div>
                    <div style="margin-top: 1rem;">
                        <div class="text-muted" style="font-size: 0.85rem; margin-bottom: 0.5rem;">Allergies</div>
                        <div id="viewAllergies" style="font-weight: 500;">None reported</div>
                    </div>
                </div>
            </div>

            <!-- Edit Mode (Hidden by default) -->
            <div id="editMode" style="display: none;">
                <form id="profileForm">
                    <!-- Body Measurements -->
                    <div class="card mb-6">
                        <h3>Update Measurements</h3>
                        <div class="grid grid-cols-2" style="gap: 1rem; margin-top: 1rem;">
                            <div class="input-group">
                                <label class="input-label">Weight (kg)</label>
                                <input type="number" id="editWeight" name="weight" class="form-control" step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Height (cm)</label>
                                <input type="number" id="editHeight" name="height" class="form-control">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Goal Weight (kg)</label>
                                <input type="number" id="editGoalWeight" name="goalWeight" class="form-control"
                                    step="0.1">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Age</label>
                                <input type="number" id="editAge" name="age" class="form-control" min="10" max="120">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Gender</label>
                                <select id="editGender" name="gender" class="form-control">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Dietary Preferences -->
                    <div class="card mb-6">
                        <h3>Dietary Preferences</h3>
                        <div class="grid grid-cols-2" style="gap: 1rem; margin-top: 1rem;">
                            <div class="input-group">
                                <label class="input-label">Diet Type</label>
                                <select id="editDietType" name="dietType" class="form-control">
                                    <option value="omnivore">Omnivore</option>
                                    <option value="vegetarian">Vegetarian</option>
                                    <option value="vegan">Vegan</option>
                                    <option value="pescatarian">Pescatarian</option>
                                    <option value="keto">Keto</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Food Allergies</label>
                                <input type="text" id="editAllergiesList" name="allergiesList" class="form-control"
                                    placeholder="e.g. peanuts, dairy, gluten">
                                <small class="text-muted">Separate multiple allergies with commas</small>
                            </div>
                        </div>
                    </div>

                    <!-- Lifestyle -->
                    <div class="card mb-6">
                        <h3>Lifestyle & Habits</h3>
                        <div class="grid grid-cols-2" style="gap: 1rem; margin-top: 1rem;">
                            <div class="input-group">
                                <label class="input-label">Activity Level</label>
                                <select id="editActivity" name="activity" class="form-control">
                                    <option value="sedentary">Sedentary (Office job)</option>
                                    <option value="light">Light (1-2 days/week)</option>
                                    <option value="moderate">Moderate (3-5 days/week)</option>
                                    <option value="active">Active (6-7 days/week)</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Sleep Quality</label>
                                <select id="editSleep" name="sleepQuality" class="form-control">
                                    <option value="good">Good</option>
                                    <option value="average">Average</option>
                                    <option value="poor">Poor</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Water Intake (Liters)</label>
                                <input type="number" id="editWater" name="water" class="form-control" step="0.5">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Meals Per Day</label>
                                <input type="number" id="editMeals" name="mealsPerDay" class="form-control" min="1"
                                    max="10">
                            </div>
                        </div>
                    </div>

                    <!-- Medical -->
                    <div class="card mb-6">
                        <h3>Medical Information</h3>
                        <div class="input-group">
                            <label class="input-label">Medications (if any)</label>
                            <textarea id="editMedications" name="medications" class="form-control" rows="2"
                                placeholder="List any medications..."></textarea>
                        </div>
                        <div class="input-group">
                            <label class="input-label">Allergies / Intolerances</label>
                            <input type="text" id="editAllergies" name="allergies" class="form-control"
                                placeholder="e.g. Peanuts, Lactose">
                        </div>
                    </div>

                    <!-- Actions -->
                    <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                        <button type="button" class="btn btn-outline" onclick="cancelEdit()">Cancel</button>
                        <button type="button" class="btn btn-primary" onclick="saveProfile()">üíæ Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script src="assets/js/db.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/app.js"></script>
</body>

</html>